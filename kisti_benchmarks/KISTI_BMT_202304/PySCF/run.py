import pyscf
from pyscf import mcscf, scf
import numpy
import sys


mol= pyscf.gto.M(basis='6-31g*', charge=2, spin=2,atom='''
Mg 0.000000   0.000000  0.000000
N  1.406727   1.406727  0.000000
N -1.40672   1.406727  0.000000
N  1.406727  -1.406727 0.000000
N -1.40672  -1.40672  0.000000
C  0.000000   3.400142  0.000000
C  0.000000  -3.40014  0.000000
C  3.400142   0.000000  0.000000
C -3.40014   0.000000  0.000000
C  1.222770   2.760387  0.000000
C -1.22277   2.760387  0.000000
C  1.222770  -2.76038  0.000000
C -1.22277  -2.76038  0.000000
C  2.760387   1.222770  0.000000
C -2.76038   1.222770  0.000000
C  2.760387  -1.22277  0.000000
C -2.76038  -1.22277  0.000000
H  0.000000   4.482672  0.000000
H  0.000000  -4.48267  0.000000
H  4.482672   0.000000  0.000000
H -4.48267   0.000000  0.000000
H  2.181081   3.277651  0.000000
H -2.18108   3.277651  0.000000
H  2.181081  -3.27765  0.000000
H -2.18108  -3.27765  0.000000
H  3.277651   2.181081  0.000000
H -3.27765   2.181081  0.000000
H  3.277651  -2.18108  0.000000
H -3.27765  -2.181081  0.000000
''')
mol.build()
myhf = scf.ROHF(mol)
myhf = scf.addons.frac_occ(myhf)

myhf.kernel()

ncas, nelecas = (11,8)
mycas = mcscf.CASSCF(myhf, ncas, nelecas)
mycas.ah_start_tol=1e-8
mycas.ah_conv_tol=1e-10
mycas.conv_tol = 5e-4

mycas.run()